<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Product Customer View with Pagination</title>
    <link rel="stylesheet" href="css/trend.css">
    <script src="login.js"></script> 
    <style>
        /* Basic styles for pagination */
        .pagination {
            display: flex;
            justify-content: center; /* Centers the pagination */
            margin-top: 20px;
        }
        .pagination a {
            color: black;
            padding: 8px 16px;
            text-decoration: none;
            border: 1px solid #ddd;
            margin: 0 4px; /* Adds space between pagination items */
        }
        .pagination a.active {
            background-color: #4CAF50;
            color: white;
            border: 1px solid #4CAF50;
        }
        .pagination a:hover:not(.active) {
            background-color: #ddd;
        }
    </style>
</head>
<body>

    <!-- Sidebar Filter -->
    <div class="sidebar">
        <h2>Filter Products</h2>

        <div class="filter-section">
            <label>Search</label>
            <input type="text" id="searchInput" placeholder="Search by name">
        </div>

        <div class="filter-section">
            <label>Tags</label>
            <div><input type="checkbox" class="tag-filter" value="Discount"> Discount</div>
            <div><input type="checkbox" class="tag-filter" value="New Arrival"> New Arrival</div>
        </div>

        <div class="filter-section">
            <label>Price Range</label>
            <div><input type="checkbox" value="0-50" class="price-range"> $0 - $50</div>
            <div><input type="checkbox" value="50-100" class="price-range"> $50 - $100</div>
            <div><input type="checkbox" value="100-200" class="price-range"> $100 - $200</div>
            <div><input type="checkbox" value="200-500" class="price-range"> $200 - $500</div>
            <div><input type="checkbox" value="500" class="price-range"> Above $500</div>
        </div>
    </div>

    <!-- Product Content with Pagination -->
    <div class="content">
        <div class="product-view" id="productView">
            <!-- Product Cards will be dynamically inserted here -->
        </div>

        <!-- Pagination Controls -->
        <div class="pagination" id="paginationControls">
            <!-- Pagination buttons will be inserted here dynamically -->
        </div>
    </div>

    <script>
        const products = [
            { name: 'Product 1', price: 10, tags: ['Discount'] },
            { name: 'Product 2', price: 20, tags: ['New Arrival'] },
            { name: 'Product 3', price: 150, tags: [] },
            { name: 'Product 4', price: 300, tags: ['Discount'] },
            { name: 'Product 5', price: 500, tags: ['New Arrival'] },
            { name: 'Product 6', price: 45, tags: [] },
            { name: 'Product 7', price: 600, tags: ['Discount'] },
            // Add more products as needed
        ];

        const productsPerPage = 3;
        let currentPage = 1;

        function displayProducts(page) {
            const filteredProducts = applyFilters();
            const startIndex = (page - 1) * productsPerPage;
            const endIndex = startIndex + productsPerPage;
            const displayedProducts = filteredProducts.slice(startIndex, endIndex);

            const productView = document.getElementById('productView');
            productView.innerHTML = ''; // Clear existing products

            displayedProducts.forEach(product => {
                const productDiv = document.createElement('div');
                productDiv.className = 'product-card';
                productDiv.innerHTML = `<h3>${product.name}</h3><p>Price: $${product.price}</p>`;
                productView.appendChild(productDiv);
            });
        }

        function createPagination(totalProducts) {
            const totalPages = Math.ceil(totalProducts / productsPerPage);
            const paginationControls = document.getElementById('paginationControls');
            paginationControls.innerHTML = ''; // Clear existing pagination

            const prevLink = document.createElement('a');
            prevLink.href = '#';
            prevLink.innerHTML = '&laquo;';
            prevLink.onclick = (e) => {
                e.preventDefault();
                if (currentPage > 1) {
                    currentPage--;
                    displayProducts(currentPage);
                    createPagination(totalProducts);
                }
            };
            paginationControls.appendChild(prevLink);

            for (let i = 1; i <= totalPages; i++) {
                const pageLink = document.createElement('a');
                pageLink.href = '#';
                pageLink.innerText = i;
                pageLink.className = currentPage === i ? 'active' : '';
                pageLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    currentPage = i;
                    displayProducts(currentPage);
                    createPagination(totalProducts);
                });
                paginationControls.appendChild(pageLink);
            }

            const nextLink = document.createElement('a');
            nextLink.href = '#';
            nextLink.innerHTML = '&raquo;';
            nextLink.onclick = (e) => {
                e.preventDefault();
                if (currentPage < totalPages) {
                    currentPage++;
                    displayProducts(currentPage);
                    createPagination(totalProducts);
                }
            };
            paginationControls.appendChild(nextLink);
        }

        function applyFilters() {
            const searchValue = document.getElementById('searchInput').value.toLowerCase();
            const selectedTags = Array.from(document.querySelectorAll('.tag-filter:checked')).map(checkbox => checkbox.value);
            const selectedPriceRanges = Array.from(document.querySelectorAll('.price-range:checked')).map(checkbox => checkbox.value);

            return products.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(searchValue);
                const matchesTags = selectedTags.length === 0 || selectedTags.some(tag => product.tags.includes(tag));
                const matchesPrice = selectedPriceRanges.length === 0 || selectedPriceRanges.some(range => {
                    const [min, max] = range.split('-').map(Number);
                    return max ? product.price >= min && product.price <= max : product.price >= min;
                });
                return matchesSearch && matchesTags && matchesPrice;
            });
        }

        // Event listeners for filters
        document.getElementById('searchInput').addEventListener('input', () => {
            currentPage = 1;
            displayProducts(currentPage);
            createPagination(applyFilters().length);
        });
        
        document.querySelectorAll('.tag-filter').forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                currentPage = 1;
                displayProducts(currentPage);
                createPagination(applyFilters().length);
            });
        });

        document.querySelectorAll('.price-range').forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                currentPage = 1;
                displayProducts(currentPage);
                createPagination(applyFilters().length);
            });
        });

        // Initialize display and pagination on page load
        displayProducts(currentPage);
        createPagination(applyFilters().length);
    </script>
</body>
</html>
